!!! 5
%html
  %head
    = render :partial => "layouts/head"
  %body
    %nav#navbar-top.navbar.navbar-expand-lg.navbar-dark.bg-primary.fixed-top
      .container-fluid
        %a.navbar-brand{:href => "/"}= @title || DEFAULT_TITLE
        %button.navbar-toggler{"type" => "button", "data-bs-toggle" => "collapse", "data-bs-target" => "#sidebarMenu", :aria => {"controls" => "sidebarMenu", "expanded" => "false", "label" => "Toggle navigation"}}
          %span.navbar-toggler-icon
    / Persistent Sidebar (visible on desktop, collapsible on mobile)
    #sidebarMenu.collapse.sidebar-collapse.d-md-block{"aria-labelledby" => "sidebar-label", :id => "sidebarMenu"}
      .sidebar-header
        %h5.my-3= login? ? current_ma_user.code : DEFAULT_HEADER
      .sidebar-body
        %ul.nav.flex-column
          %li.nav-item
            %a.nav-link{:href => "/jinda"} Home
          = render :partial => "jinda/menu_mm"
          - if login?
            %li.nav-item
              %a.nav-link{:href=>"/jinda/pending"} Pending Tasks
            %li.nav-item
              %a.nav-link{:href => logout_path} Sign Out
          - else
            %li.nav-item
              %a.nav-link{:href=>new_session_path} Sign In
            %li.nav-item
              %a.nav-link{:href=>new_identity_path} Sign Up
          %li.nav-item
            = link_to "Refresh", "#", :class => "nav-link", :onclick=>"window.location.replace('/')"
          - if !login?    
            .login-box.mt-3
              = link_to image_tag( 'facebook-continue-button.png'), '/auth/facebook', rel: "external", class: "btn btn-primary d-block mb-2" 
              = link_to image_tag( 'google-continue-button.png'), '/auth/google_oauth2', rel: "external", class: "btn btn-danger d-block"
    %main.py-3.ms-sidebar
      .container-fluid
        %div.row
          .col-12
            = yield
    = render :partial => "jinda/static"
    - if flash.any?
      - flash.each do |key, msg|
        %div{class: "alert alert-#{key == 'notice' ? 'info' : 'danger'}", role: 'alert'}= msg

:javascript
  // Toggle sidebar on mobile
  document.addEventListener('DOMContentLoaded', function() {
    const toggler = document.querySelector('.navbar-toggler');
    const sidebar = document.querySelector('#sidebarMenu');
    toggler.addEventListener('click', function() {
      sidebar.classList.toggle('show');
    });
  });